# 测试命令说明

## CAN消息测试命令

使用CAN工具（如can-utils）发送以下命令来测试不同的动画效果：

### 1. 测试开心状态 - 彩虹效果
```bash
# 发送情绪状态命令，数据为0x01 (开心)
cansend can0 789#01
```

### 2. 测试伤心状态 - 闪电效果  
```bash
# 发送情绪状态命令，数据为0x02 (伤心)
cansend can0 789#02
```

### 3. 测试惊讶状态 - 紫色追逐效果
```bash
# 发送情绪状态命令，数据为0x03 (惊讶)
cansend can0 789#03
```

### 4. 测试中性状态 - 呼吸灯切换颜色效果
```bash
# 发送情绪状态命令，数据为0x04 (中性)
cansend can0 789#04
```

### 5. 关闭所有效果
```bash
# 发送情绪状态命令，数据为0x00 (关闭)
cansend can0 789#00
```

### 6. 测试板载LED控制
```bash
# 开启板载LED
cansend can0 456#01

# 关闭板载LED  
cansend can0 456#00
```

## 效果验证

### 彩虹效果验证点：
- [ ] 颜色从红色平滑过渡到绿色、蓝色
- [ ] 彩虹带在LED条上流动
- [ ] 没有明显的颜色跳跃或闪烁

### 闪电效果验证点：
- [ ] 随机位置出现蓝白色闪电
- [ ] 闪电周围有蓝色光晕
- [ ] 偶尔出现黑暗期增加戏剧效果

### 紫色追逐效果验证点：
- [ ] 紫色光带在LED条上移动
- [ ] 光带长度约为8个LED
- [ ] 光带尾部亮度逐渐衰减

### 呼吸灯效果验证点：
- [ ] 亮度平滑地渐亮渐暗
- [ ] 颜色按顺序切换：暖白→红→绿→蓝
- [ ] 每种颜色持续约10秒

## 故障排除

如果效果不正确，请检查：

1. **CAN总线连接**: 确认CAN H/L线路连接正确
2. **波特率设置**: 确认为500Kbps
3. **电源供应**: 确认12V电源充足
4. **LED数据线**: 确认GPIO18连接到LED条的数据输入
5. **LED数量**: 确认代码中的LED数量与实际匹配

## 日志输出示例

正常运行时，串口监控应该显示类似输出：

```
I (xxx) ESPCAN_SK6812: ESPCAN-LIGHT-12V-SK6812GRBW 启动
I (xxx) ESPCAN_SK6812: SK6812 GRBW LED数量: 200
I (xxx) ESPCAN_SK6812: 初始化RMT通道，GPIO: 18
I (xxx) ESPCAN_SK6812: RMT初始化成功
I (xxx) ESPCAN_SK6812: 显示彩色测试 - 5秒
I (xxx) ESPCAN_SK6812: CAN接收端初始化中...
I (xxx) ESPCAN_SK6812: TWAI驱动安装成功
I (xxx) ESPCAN_SK6812: TWAI驱动启动成功
I (xxx) ESPCAN_SK6812: CAN接收端初始化完成，等待接收数据...
I (xxx) ESPCAN_SK6812: 情绪动画任务已创建
I (xxx) ESPCAN_SK6812: 接收到CAN帧 - ID: 0x789
I (xxx) ESPCAN_SK6812: 情绪状态设置为: 开心 (彩虹效果)
``` 